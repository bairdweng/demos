# -----------------------------------------------
# !!! THIS FILE WAS GENERATED BY TYPE-GRAPHQL !!!
# !!!   DO NOT MODIFY THIS FILE BY YOURSELF   !!!
# -----------------------------------------------


# go run github.com/99designs/gqlgen

type Work {
    id: Int!
    appid: String!
    companyId: Int!
    userId: String!
    """服务类型id"""
    serviceTypeID: Int!
    """work类型 1任务2任务"""
    workType: Int
    """work名"""
    name: String!
    """work描述"""
    requirement: String!
    """任务类型: 0啥都没, 1预付, 2后支付"""
    payType: Int
    """任务时长: 默认72H"""
    duration: Int
    """任务招募截止时间"""
    endAt: Int
    """发布来源: 1app, 2小善小程序后台, 3税筹"""
    source: Int
    """# 是否正常: 1正常,2拒绝, 3已失效(失效,合同到期) , 4: 未生效(已通过审核,但是合同时间没到,没有生效), 5.删除,  7审核中"""
    status: Int
    """媒体类型: 1: 视频任务，2图片任务，3文字任务"""
    type: Int
    """任务模式: 1公开0私密, 默认公开"""
    isPublic: Int!
    """任务封面: 用于展示 / im, 文件服务url"""
    mediaCoverUrl: String
    """媒体地址: 文件服务地址数组"""
    mediaUrls: [String]
    """简历"""
    resume:String
    extend: String
    createdAt: Int
}

type Job {
    workId: Int!
    """任务分类: 1任务, 2任务"""
    category: Int!
    """支付状态: 余额是否已返回等"""
    payStatus: Int
    """任务状态: 1进行中, 2过期, 3完成"""
    progress: Int!
    """可完成人 / 次数"""
    quota: Int
    """单次任务赏金最小值"""
    singleRewardMin: Float!
    """单次任务赏金最大值"""
    singleRewardMax: Float!
    """评论模式: 是否可以评论, 1是0否, 默认1"""
    isCanComment: Int
    """凭证模式: 任务是否需要凭证, 1是0否, 默认0"""
    isNeedProof: Int!
    """凭证描述: 上传凭证页面展示描述"""
    proofDescription: String
    """凭证类型: 1视频 / 图片, 2其他"""
    proofType: Int
    remark: String
    extend: String
    updatedAt: Int
    """目前工作人数"""
    memberCount:Int
    """绩效条目"""
    achievementCount:Int
    """未处理人数"""
    unprocessCount: Int
    """是否展示任务流程"""
    isShowProgress:Int
    """任务模板id"""
    templateId: Int
}

type JobInfo {
    """work表"""
    Base: Work!
    """job表"""
    Specify: Job!
    """member表"""
    Member: JobMember
    """job_template表"""
    Template: JobTemplate
    """结算信息"""
    Settlement:Settlement
}

type Settlement {
    id : Int!
    file: String
    status:Int
    amount:Float
    created_at:Int
}

type Template {
    companyName: String,
    serviceCompanyName: String,
    serviceTypeName: String,
    settlementRule: String
}

extend type Mutation {
    """邀请参加"""
    invite(data: InviteJoinInput!): JobMember! @isAuthenticated 
    """申请参加任务"""
    apply(workId: Int!): JobMember! @isAuthenticated
    """接受邀请"""
    approveInvite(memberId: Int!): JobMember! @isAuthenticated
    """同意参加"""
    approve(data: JobInput!): JobMember! @isAuthenticated
    """拒绝参加"""
    refuse(data: JobInput!): JobMember! @isAuthenticated
    """上传凭证"""
    uploadAchievement(data: ApplyCompleteInput!): Boolean @isAuthenticated
    """修改任务参与人员备注"""
    changeMemberRemark(memberId:Int!,remark:String): Boolean @isAuthenticated
    """拉黑"""
    pullOnBlackList(companyId:Int!,userId:String!,workId:Int!): Boolean @isAuthenticated
    """上传其他类型凭证"""
    setUploadUrl(taskMemberId:String!,fileUrl:[String]!):Boolean!
    """绑定手机号"""
    bindPhone(userId:String!,encryptedData:String!,sessionKey:String!,iv:String!,group:String!):String!
    """一键同意参加任务"""
    batchApprove(workId:Int!):Boolean! @isAuthenticated
}

type JobMemberPagination{
    totalItem:Int!
    totalPage:Int!
    items:[JobMember]!
}
type ListPagination{
    totalItem:Int!
    totalPage:Int!
    items:[JobInfo]!
}
type UserFlowPagination{
    totalItem:Int!
    totalPage:Int!
    items:[userFlow]!
}

type userFlow{
    amount:Float
    payOrderItemId:String
    paymentResTime:String
}
extend type Query {
    """任务详情"""
    jobDetail(workId: Int!,taskMemberId:Int): JobInfo! @isAuthenticated
    """任务参与记录详情 status:1,待接收,2申请参加3,进行中"""
    jobMember(workId: Int!,status:Int,pageItem:Int,pageNumber:Int!): JobMemberPagination @isAuthenticated
    """邀请列表"""
    inviteList(pageItem:Int,pageNumber:Int!,appId:String): ListPagination! @isAuthenticated
    """已参加列表"""
    joinList(pageItem:Int,pageNumber:Int!,appId:String): ListPagination! @isAuthenticated
    """可申请列表"""
    list(pageNumber: Int! = 1, pageItem: Int! = 10,appId:String): JobPagination! @isAuthenticated
    """任务历程"""
    process(workId:Int!,pageNumber: Int! = 1, pageItem: Int = 10): [WorkProgress] @isAuthenticated
    """用户任务流水查询"""
    userFlowPage(userId:String!,companyId:Int!,workId:Int!,pageNumber: Int! = 1, pageItem: Int = 10): UserFlowPagination @isAuthenticated
    """首页数据统计"""
    dataStatistics(companyId:Int!): Statistics! @isAuthenticated
    """首页绩效发放数据统计"""
    companyProvideAmount(companyId:Int!): CompanyStatistics! @isAuthenticated
    """待办事项"""
    redDotCount:RedDotCount! @isAuthenticated
    """获取上传凭证地址"""
    getUploadUrl(taskMemberId:Int!):String!
    """判断是否绑定手机号,是则返回手机号,否返回空字符串"""
    isBindPhone(userId:String!):String!
    """结算列表 (settlementType:0 待结算 1 已结算)"""
    settlementList(pageItem:Int! = 1,pageNumber:Int! = 10,settlementType:Int!):ListPagination! @isAuthenticated
    """获取待结算详情"""
    pendingDetail(settlementId:Int!):Settlement! @isAuthenticated
    """获取上传凭证记录"""
    uploadRecord(workId:Int!,userId:String!,pageNumber: Int! = 1, pageItem: Int = 10):UploadRecordPagination @isAuthenticated
}

type UploadRecordPagination{
    totalItem:Int!
    totalPage:Int!
    items:[uploadRecord]!
}
type uploadRecord{
    id:Int!,
    createdAt:Int!,
    file:[String!]
}

type RedDotCount {
    invite:Int!
    settlement:Int!
    job:Int!
    all:Int!
}

type Statistics {
    """任务"""
    job:jobStatistics
    """人员"""
    member:memberStatistics
    """签约数据"""
    sign:[signStatistics]
}

type CompanyStatistics {
    """统计"""
    statistics:[weekStatistics]
}

type jobStatistics{
    """任务统计"""
    jobCount : Int
    """任务人员统计"""
    jobMemberCount: Int
}

type memberStatistics{
    """任务人员统计"""
    joinMember:Int
    """任务签约数据统计"""
    signMember:Int
    """待处理条数"""
    ToDoCount:Int
}

type weekStatistics{
    """天"""
    day:String
    """发放金额"""
    money:Float
    """发放次数"""
    count:Int
}

type signStatistics{
    """服务商id"""
    serviceCompanyId:Int
    """服务商名"""
    serviceCompanyName:String
    """服务类型名"""
    serviceTypeName:String
}
#邀请参加任务
input InviteJoinInput {
    """用户id"""
    userId: String!
    """任务id"""
    workId: Int!
}

#同意参加/拒绝参加
input JobInput {
    """用户id"""
    userId: String!
    """任务参与id"""
    memberId: Int!
}

#申请完成
input ApplyCompleteInput {
    """任务参与id"""
    memberId: Int!
    """上传凭证"""
    proofFileUrl: [String]
}

#任务参与记录
type JobMember {
    id: Int!
    workId: Int
    """发布人id"""
    publisherId: String
    """参与人id"""
    participantId: String
    """任务来源: 1申请, 2邀请, 默认申请"""
    source: Int
    """任务状态: 1: 邀请中，2已申请，3已同意参加，4申请完成，5已同意完成，6已评分，7发布者已评分，8互评, 9拒绝申请, 10拒绝完成, 20踢出任务"""
    progress: Int
    """凭证id: 文件服务url"""
    proofFileUrl: String
    reward: Int
    autoCompleteAt: Int
    kickOutAt: Int
    """参与任务时间"""
    participateAt: Int
    finishAt: Int
    participantContent: String
    participantScore: Int
    publisherContent: String
    publisherScore: Int
    rejectReason: String
    """备注"""
    remark: String
    extend: String
    createdAt: Int
    updatedAt: Int
    deletedAt: Int
    """发布者信息"""
    publishUser: CommonlyUsedPersonnel
    """参与者信息"""
    participantUser: CommonlyUsedPersonnel
    """工作历程"""
    workProgress: [WorkProgress]
    """结算记录"""
    lastJobSettlementLog: JobSettlementLog
}

#任务历程表
type WorkProgress {
    id: Int!
    """appid"""
    appId: String
    """任务参与者"""
    participantId: String
    """任务发布者"""
    publisherId: String
    """任务id"""
    workId: Int
    """历程类型: created发布任务, apply申请参加任务, refuse拒绝参加任务, approve同意参加任务, invite邀请任务, refuse_invite拒绝邀请, approve_invite同意邀请参加任务, apply_complete申请完成任务 / 上传凭证, complete完成任务, refuse_complete拒绝完成任务, master_mark主态评价, guest_mark客态评价, kick_member服务者超时未完成任务, complete_auto需求者同意完成超时,"""
    type: String
    extend: String
    createdAt: Int
    updatedAt: Int
    """发布者信息"""
    publishUser: CommonlyUsedPersonnel
    """参与者信息"""
    participantUser: CommonlyUsedPersonnel
}
